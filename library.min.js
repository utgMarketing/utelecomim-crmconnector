"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}(function(root,factory){if(typeof define==="function"&&define.amd){define([],factory)}else if((typeof module==="undefined"?"undefined":_typeof(module))==="object"&&module.exports){module.exports=factory()}else{root.CrmConnector=factory()}})(undefined,(function(){var CrmConnector=function(){function CrmConnector(baseUrl){var httpOptions=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,CrmConnector);this.baseUrl=baseUrl;this.httpOptions=httpOptions;this.title="";this.text="";this.phone="";this.locality="";this.userName="";this.address="";this.gaId="";this.utmSource="";this.utmCampaign="";this.utmMedium="";this.utmTerm="";this.utmContent="";this.trademarkId=null}_createClass(CrmConnector,[{key:"setTitle",value:function setTitle(title){this.title=title;return this}},{key:"setDescription",value:function setDescription(text){this.description=text;return this}},{key:"setPhone",value:function setPhone(phone){this.phone=phone;return this}},{key:"setLocality",value:function setLocality(locality){this.locality=locality;return this}},{key:"setUserName",value:function setUserName(userName){this.userName=userName;return this}},{key:"setAddress",value:function setAddress(address){this.address=address;return this}},{key:"setGaId",value:function setGaId(gaId){this.gaId=gaId;return this}},{key:"setUtmSource",value:function setUtmSource(utmSource){this.utmSource=utmSource;return this}},{key:"setUtmCampaign",value:function setUtmCampaign(utmCampaign){this.utmCampaign=utmCampaign;return this}},{key:"setUtmMedium",value:function setUtmMedium(utmMedium){this.utmMedium=utmMedium;return this}},{key:"setUtmTerm",value:function setUtmTerm(utmTerm){this.utmTerm=utmTerm;return this}},{key:"setUtmContent",value:function setUtmContent(utmContent){this.utmContent=utmContent;return this}},{key:"setTrademarkId",value:function setTrademarkId(trademarkId){this.trademarkId=trademarkId;return this}},{key:"send",value:function send(){var _this=this;return new Promise((function(resolve,reject){if(!_this.title||!_this.description||!_this.phone){reject({code:400,message:"Обов'язкові поля не заповнені"});return}var requestData={title:_this.title,description:_this.description,phone:_this.phone,locality:_this.locality,user_name:_this.userName,address:_this.address,ga_id:_this.gaId,utm_source:_this.utmSource,utm_campaign:_this.utmCampaign,utm_medium:_this.utmMedium,utm_term:_this.utmTerm,utm_content:_this.utmContent,trademark_id:_this.trademarkId};var requestOptions={method:"POST",headers:Object.assign({},{"Content-Type":"application/json",Accept:"application/json"},_this.httpOptions.headers||{}),body:JSON.stringify(requestData),timeout:_this.httpOptions.timeout||1e4};fetch(_this.baseUrl+"/crm/create_lead_public",requestOptions).then((function(response){if(response.status===201){return response.json()}else{var errorPromise=response.json();errorPromise.statusCode=response.status;throw errorPromise}})).then((function(data){resolve({code:201,message:"Лід успішно створено",data:data})})).catch((function(errorPromise){errorPromise.then((function(errorData){var errorMessage=errorData.error||"Помилка сервера";var errorCode=errorPromise.statusCode||500;reject({code:errorCode,message:errorMessage})}))}))}))}}]);return CrmConnector}();return CrmConnector}));