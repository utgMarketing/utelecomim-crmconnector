!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof module&&module.exports?module.exports=e():t.CrmConnector=e()}(this,(function(){return class{constructor(t,e={}){this.baseUrl=t,this.httpOptions=e,this.title="",this.text="",this.phone="",this.locality="",this.userName="",this.address="",this.gaId="",this.utmSource="",this.utmCampaign="",this.utmMedium="",this.utmTerm="",this.utmContent="",this.trademarkId=null}setTitle(t){return this.title=t,this}setDescription(t){return this.description=t,this}setPhone(t){return this.phone=t,this}setLocality(t){return this.locality=t,this}setUserName(t){return this.userName=t,this}setAddress(t){return this.address=t,this}setGaId(t){return this.gaId=t,this}setUtmSource(t){return this.utmSource=t,this}setUtmCampaign(t){return this.utmCampaign=t,this}setUtmMedium(t){return this.utmMedium=t,this}setUtmTerm(t){return this.utmTerm=t,this}setUtmContent(t){return this.utmContent=t,this}setTrademarkId(t){return this.trademarkId=t,this}send(){return new Promise(((t,e)=>{if(!this.title||!this.description||!this.phone)return void e({code:400,message:"Обов'язкові поля не заповнені"});const s={title:this.title,description:this.description,phone:this.phone,locality:this.locality,user_name:this.userName,address:this.address,ga_id:this.gaId,utm_source:this.utmSource,utm_campaign:this.utmCampaign,utm_medium:this.utmMedium,utm_term:this.utmTerm,utm_content:this.utmContent,trademark_id:this.trademarkId},i={method:"POST",headers:Object.assign({},{"Content-Type":"application/json",Accept:"application/json"},this.httpOptions.headers||{}),body:JSON.stringify(s),timeout:this.httpOptions.timeout||1e4};fetch(this.baseUrl+"/crm/create_lead_public",i).then((t=>{if(201===t.status)return t.json();{const e=t.json();throw e.statusCode=t.status,e}})).then((e=>{t({code:201,message:"Лід успішно створено",data:e})})).catch((t=>{t.then((s=>{const i=s.error||"Помилка сервера",r=t.statusCode||500;e({code:r,message:i})}))}))}))}}}));