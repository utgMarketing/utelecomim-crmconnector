!function(t,s){"function"==typeof define&&define.amd?define([],s):"object"==typeof module&&module.exports?module.exports=s():t.CrmConnector=s()}(this,function(){return class t{constructor(t,s={}){this.baseUrl=t,this.httpOptions=s,this.title="",this.text="",this.phone="",this.locality="",this.userName="",this.address="",this.gaId="",this.utmSource="",this.utmCampaign="",this.utmMedium="",this.utmTerm="",this.utmContent=""}setTitle(t){return this.title=t,this}setDescription(t){return this.description=t,this}setPhone(t){return this.phone=t,this}setLocality(t){return this.locality=t,this}setUserName(t){return this.userName=t,this}setAddress(t){return this.address=t,this}setGaId(t){return this.gaId=t,this}setUtmSource(t){return this.utmSource=t,this}setUtmCampaign(t){return this.utmCampaign=t,this}setUtmMedium(t){return this.utmMedium=t,this}setUtmTerm(t){return this.utmTerm=t,this}setUtmContent(t){return this.utmContent=t,this}send(){return new Promise((t,s)=>{if(!this.title||!this.description||!this.phone){s({code:400,message:"Обов'язкові поля не заповнені"});return}let e={title:this.title,description:this.description,phone:this.phone,locality:this.locality,user_name:this.userName,address:this.address,ga_id:this.gaId,utm_source:this.utmSource,utm_campaign:this.utmCampaign,utm_medium:this.utmMedium,utm_term:this.utmTerm,utm_content:this.utmContent},i={method:"POST",headers:Object.assign({},{"Content-Type":"application/json",Accept:"application/json"},this.httpOptions.headers||{}),body:JSON.stringify(e),timeout:this.httpOptions.timeout||1e4};fetch(this.baseUrl+"/crm/create_lead_public",i).then(t=>{if(201===t.status)return t.json();{let s=t.json();throw s.statusCode=t.status,s}}).then(s=>{t({code:201,message:"Лід успішно створено",data:s})}).catch(t=>{t.then(e=>{let i=e.error||"Помилка сервера",h=t.statusCode||500;s({code:h,message:i})})})})}}});